<<<<<<< HEAD
{"version":3,"sources":["../src/pro.js"],"names":["define","$","log","cfg","trainingsessionspro","init","bind","check_product_key","trigger","debug","that","productkey","val","replace","payload","substr","crc","calculated","checksum","validicon","wwwroot","cautionicon","invalidicon","waiticon","url","remove","after","get","data","match","keypayload","crcrangearr","split","crccount","length","chars","ch","ord","charCodeAt","crc2","Math","floor","crc1"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\n\n    var trainingsessionspro = {\n\n        init: function() {\n\n            $('#id_s_report_trainingsessions_licensekey').bind('change', this.check_product_key);\n            $('#id_s_report_trainingsessions_licensekey').trigger('change');\n            log.debug('AMD Pro js initialized for report trainingsessions');\n        },\n\n        check_product_key: function() {\n\n            var that = $(this);\n\n            var productkey = that.val().replace(/-/g, '');\n            var payload = productkey.substr(0, 14);\n            var crc = productkey.substr(14, 2);\n\n            var calculated = trainingsessionspro.checksum(payload);\n\n            var validicon = ' <img src=\"' + cfg.wwwroot + '/pix/i/valid.png' + '\">';\n            var cautionicon = ' <img src=\"' + cfg.wwwroot + '/pix/i/warning.png' + '\">';\n            var invalidicon = ' <img src=\"' + cfg.wwwroot + '/pix/i/invalid.png' + '\">';\n            var waiticon = ' <img src=\"' + cfg.wwwroot + '/pix/i/ajaxloader.gif' + '\">';\n\n            if (crc === calculated) {\n                var url = cfg.wwwroot + '/report/trainingsessions/pro/ajax/services.php?';\n                url += 'what=license';\n                url += '&service=check';\n                url += '&customerkey=' + that.val();\n                url += '&provider=' + $('#id_s_report_trainingsessions_licenseprovider').val();\n\n                $('#id_s_report_trainingsessions_licensekey + img').remove();\n                $('#id_s_report_trainingsessions_licensekey').after(waiticon);\n\n                $.get(url, function(data) {\n                    if (data.match(/SET OK/)) {\n                        $('#id_s_report_trainingsessions_licensekey + img').remove();\n                        $('#id_s_report_trainingsessions_licensekey').after(validicon);\n                    } else {\n                        $('#id_s_report_trainingsessions_licensekey + img').remove();\n                        $('#id_s_report_trainingsessions_licensekey').after(invalidicon);\n                    }\n                }, 'html');\n            } else {\n                $('#id_s_report_trainingsessions_licensekey + img').remove();\n                $('#id_s_report_trainingsessions_licensekey').after(cautionicon);\n            }\n        },\n\n        /**\n         * Calculates a checksum on 2 chars.\n         */\n        checksum: function(keypayload) {\n\n            var crcrange = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            var crcrangearr = crcrange.split('');\n            var crccount = crcrangearr.length;\n            var chars = keypayload.split('');\n            var crc = 0;\n\n            for (var ch in chars) {\n                var ord = chars[ch].charCodeAt(0);\n                crc += ord;\n            }\n\n            var crc2 = Math.floor(crc / crccount) % crccount;\n            var crc1 = crc % crccount;\n            return '' + crcrangearr[crc1] + crcrangearr[crc2];\n        }\n    };\n\n    return trainingsessionspro;\n});"],"file":"pro.min.js"}
=======
{"version":3,"sources":["../src/pro.js"],"names":["define","$","log","cfg","trainingsessionspro","component","shortcomponent","componentpath","init","licensekeyid","bind","check_product_key","trigger","debug","that","productkey","val","replace","payload","substr","crc","calculated","checksum","validicon","wwwroot","cautionicon","invalidicon","waiticon","found","url","remove","after","get","data","match","keypayload","crcrangearr","split","crccount","length","chars","ch","ord","charCodeAt","crc2","Math","floor","crc1"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\n\n    var trainingsessionspro = {\n\n        component: 'report_trainingsessions',\n        shortcomponent: 'report_trainingsessions',\n        componentpath: 'report/trainingsessions',\n\n        init: function() {\n\n            var licensekeyid = '#id_s_' + trainingsessionspro.component + '_licensekey';\n            $(licensekeyid).bind('change', this.check_product_key);\n            $(licensekeyid).trigger('change');\n            log.debug('AMD Pro js initialized for ' + trainingsessionspro.component + ' system');\n        },\n\n        check_product_key: function() {\n\n            var licensekeyid = '#id_s_' + trainingsessionspro.component + '_licensekey';\n\n            var that = $(this);\n\n            var productkey = that.val().replace(/-/g, '');\n            var payload = productkey.substr(0, 14);\n            var crc = productkey.substr(14, 2);\n\n            var calculated = trainingsessionspro.checksum(payload);\n\n            var validicon = ' <img src=\"' + cfg.wwwroot + '/pix/i/valid.png' + '\">';\n            var cautionicon = ' <img src=\"' + cfg.wwwroot + '/pix/i/warning.png' + '\">';\n            var invalidicon = ' <img src=\"' + cfg.wwwroot + '/pix/i/invalid.png' + '\">';\n            var waiticon = ' <img src=\"' + cfg.wwwroot + '/pix/i/ajaxloader.gif' + '\">';\n            var found;\n\n            if (crc === calculated) {\n                var url = cfg.wwwroot + '/' + trainingsessionspro.componentpath + '/pro/ajax/services.php?';\n                url += 'what=license';\n                url += '&service=check';\n                url += '&customerkey=' + that.val();\n                url += '&provider=' + $('#id_s_' + trainingsessionspro.component + '_licenseprovider').val();\n\n                $(licensekeyid + ' + img').remove();\n                $(licensekeyid).after(waiticon);\n\n                $.get(url, function(data) {\n                    if (data.match(/SET OK/)) {\n                        if (found = data.match(/-\\d+.*$/)) {\n                            $(licensekeyid + ' + img').remove();\n                            $(licensekeyid).after(cautionicon);\n                        } else {\n                            $(licensekeyid + ' + img').remove();\n                            $(licensekeyid).after(validicon);\n                        }\n                    } else {\n                        $(licensekeyid + ' + img').remove();\n                        $(licensekeyid).after(invalidicon);\n                    }\n                }, 'html');\n            } else {\n                $(licensekeyid + ' + img').remove();\n                $(licensekeyid).after(cautionicon);\n            }\n        },\n\n        /**\n         * Calculates a checksum on 2 chars.\n         */\n        checksum: function(keypayload) {\n\n            var crcrange = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            var crcrangearr = crcrange.split('');\n            var crccount = crcrangearr.length;\n            var chars = keypayload.split('');\n            var crc = 0;\n\n            for (var ch in chars) {\n                var ord = chars[ch].charCodeAt(0);\n                crc += ord;\n            }\n\n            var crc2 = Math.floor(crc / crccount) % crccount;\n            var crc1 = crc % crccount;\n            return '' + crcrangearr[crc1] + crcrangearr[crc2];\n        }\n    };\n\n    return trainingsessionspro;\n});"],"file":"pro.min.js"}
>>>>>>> MOODLE_39_STABLE
